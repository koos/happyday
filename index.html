<html>
  <head>

    <title>Happyvideo - everyday a #happyday</title>

    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

    <meta name="description" content="Happyvideo is pure happiness! Just listen to these songs, spread them and be happy! Everyday a #happyday!"/>
    <meta property="og:title" content="Everyday a Happyday"/>
    <meta property="og:type" content="cause"/>
    <meta property="og:url" content="http://www.happyvideo.co"/>
    <meta property="og:image" content="http://www.happyvideo.co/happy.png"/>
    <meta property="og:site_name" content="Happyvideo - everyday a #happyday"/>
    <!-- <meta property="fb:admins" content="500108777"/> -->
    <meta property="og:locale" content="en_US"/>
    <meta property="og:description" content="Happyvideo is pure happiness! Just listen to these songs, spread them and be happy! Everyday a #happyday!"/>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js" type="text/javascript"></script>
    <link rel="stylesheet" href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.10.4/themes/smoothness/jquery-ui.css" />
    <script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.10.4/jquery-ui.min.js"></script>
    <style>
      * {
        padding: 0;
        margin: 0;
      }

      div {
        box-sizing: border-box;
      }

      body {
        overflow-y: hidden;
        width: 100%;
        height: 100%;
        max-height: 100%;
      }

      a {
        color: #aaa;
        text-decoration: underline;
      }

      .videos {
        float: left;
        max-height: 100%;
        overflow-x: hidden;
        background-color: black;
        /*  pointer-events: none;*/
      }

      .row {
        position: relative;
        /*height: 33.333333%;*/
        width: 100%;
        float: left;
      }

      .row img {
        width: 33.3%;
        display: block;
        float: left;
      }

      .addthis_toolbox {
        width: 301px;
        margin: 0px auto;
      }

      .overlay {
        position: absolute;
        top: 50%;
        left: 50%;
        width: 80%;
        max-width: 960px;
        background-color: rgba(225, 228, 0, 0.5);
        box-shadow: 0px 0px 5px rgba(0,0,0,0.8);
        border-radius: 5px;
        padding: 30px;
        z-index: 1000;
      }

      footer {
        width: 100%;
        position: fixed;
        height: 100px;
        bottom: 0;
        padding: 10px 0;
        color: black;
        text-align: left;
        background-color: rgb(225, 228, 0);
        border-color: #080808;
        font-family: "Helvetica";
        text-align: center
      }
    </style>

  </head>
  <body>
    <div class='overlay'>
      <iframe src="http://www.youtube.com/embed/GINbI5CMt3I?rel=0&autoplay=0" frameborder="0" allowfullscreen autostart id="GINbI5CMt3I"></iframe>
    </div>
    <div class='videos'>
    </div>
    <script type="text/javascript">
      jQuery(document).ready(function ($) {
        var url = "http://gdata.youtube.com/feeds/api/videos/?v=2&q=happyday+happy+edition&alt=jsonc&max-results=50&callback=?";

        var positionOverlay = function() {
          console.log('resize');
          $('.overlay').css({
            'margin-left': -($('.overlay').outerWidth()/2),
            'margin-top': -($('.overlay').outerHeight()/2)
          });
          console.log($('.overlay').outerWidth() - 30);
          $('.overlay iframe').width($('.overlay').innerWidth() - 60);
          $('.overlay iframe').height($('.overlay').innerWidth() * 9/16);
        };


        $.getJSON(url, function (json) {
          if (json.data.items) {
            var items = json.data.items;
            var item = items[Math.floor(Math.random()*items.length)];
            $('.overlay').empty();
            $('.overlay').append('<iframe src="http://www.youtube.com/embed/'+item.id+'?rel=0&autoplay=1" frameborder="0" allowfullscreen autostart></iframe>');
            $('.overlay').show();
            positionOverlay();
          }
          console.log(items);
          if (items.length === 0) {
            console.log("No videos found");
          } else {
            for(var i = 0; i < items.length; i++) {
              if( i % 3 == 0) {
                $('.videos').append($('<div>', { "class": "row" }));
              }
              $('.videos .row').last().append($('<img>', {
                src : items[i].thumbnail.hqDefault,
                alt : items[i].title,
                title : items[i].title,
                id: items[i].id,
                "class": 'video-item'
              }));


              $("#"+items[i].id).click(function() {
                $('.overlay').empty();
                $('.overlay').append('<iframe src="http://www.youtube.com/embed/'+$(this).attr('id')+'?rel=0&autoplay=1" frameborder="0" allowfullscreen autostart></iframe>');
                $('.overlay').show();
                positionOverlay();
              });

            }

            var interval = setInterval(function() {
              if($('.row img').length > 0) {
                // $('.videos').width($('.row img').first().width()*(Math.ceil(items.length/3)));
                // $('.row').width($('.row img').first().width());
                clearInterval(interval);
              }
            }, 500);

          }
        });
        //run once
        var el=$('.overlay');
        var originalelpos=el.offset().top + $('.overlay').height() / 2; // take it where it originally is on the page
        // //run on scroll
        //  $(window).scroll(function(){
        //     var el = $('.overlay'); // important! (local)
        //     var elpos = el.offset().top; // take current situation
        //     var windowpos = $(window).scrollTop();
        //     var finaldestination = windowpos+originalelpos;
        //     el.stop().animate({'top':finaldestination},500);
        //  });

        $(window).on('resize', positionOverlay);
      });
    </script>

    <footer>
      Spread the happiness on Twitter and Facebook!
      <script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-538b071779a6526e"></script>
      <div class="addthis_toolbox addthis_default_style addthis_counter_style">
        <a class="addthis_button_facebook_share" fb:like:layout="box_count"></a>
        <a class="addthis_button_tweet" tw:count="vertical"></a>
        <a class="addthis_button_google_plusone" g:plusone:size="tall"></a>
        <a class="addthis_button_linkedin_counter" li:counter="top"></a>
        <a class="addthis_counter"></a>
      </div>
      Happyday is a <a href="http://4hourventure.com" rel="nofollow">4 hour venture</a> by <a href="http://twitter.com/koos" rel="nofollow">@koos</a> and <a href="http://twitter.com/yoyostile" rel="nofollow">@yoyostile</a>.
      <script type="text/javascript">var addthis_config = {"data_track_addressbar":true};</script>
      <noscript><div id="noscript">(please enable javascript)<span>This is pure happiness!</span></div></noscript>
      <script type="text/javascript">
        var addthis_config = addthis_config||{};
        addthis_config.pubid = "ra-538b071779a6526e";
      </script>
    </footer>

    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-51533325-1', 'happyvideo.co');
      ga('send', 'pageview');

    </script>
  </body>
<!-- </-xhtml> -->
